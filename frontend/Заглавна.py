import streamlit as st
import plotly.graph_objs as go

from common import mayors, get_municipal_df


def intro() -> None:
    st.write("# –°—Ç—Ä–æ–∏—Ç–µ–ª–Ω–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ –∫–º–µ—Ç—Å–∫–∏ –º–∞–Ω–¥–∞—Ç, –û–±—â–∏–Ω–∞ –ü–ª–æ–≤–¥–∏–≤")
    st.sidebar.success("–ò–∑–±–µ—Ä–µ—Ç–µ –º–∞–Ω–¥–∞—Ç")
    st.markdown(
        """
        –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª–Ω–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å –≤—ä–∑–ª–æ–∂–∏—Ç–µ–ª –û–±—â–∏–Ω–∞ –ü–ª–æ–≤–¥–∏–≤, 
        –∫–∞–∫—Ç–æ –∏ —Ä–∞–∑–¥–µ–ª—è–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª–Ω–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ —Ç–æ–≤–∞ –¥–∞–ª–∏ 
        –ø–æ-–≤–µ—Ä–æ—è—Ç–Ω–æ —Å–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∏ –∏–ª–∏ –Ω–µ–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∏.
        
        –í –∫—Ä–∞—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –µ –ø—Ä–µ–¥—Å—Ç–∞–≤–µ–Ω–∞ –¥–∏–∞–≥—Ä–∞–º–∞ –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ç–∞ —Å –≤—ä–∑–ª–æ–∂–∏—Ç–µ–ª
        –û–±—â–∏–Ω–∞ –ü–ª–æ–≤–¥–∏–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ –ø–æ –∫–º–µ—Ç—Å–∫–∏ –º–∞–Ω–¥–∞—Ç–∏.
        
        –û—Ç–¥–µ–ª–Ω–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∏ —Å—ä–¥—ä—Ä–∂–∞—Ç –ø–æ-–¥–µ—Ç–∞–π–ª–Ω–∞ —Ä–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ç–∞.
        

        **üëà –ò–∑–±–µ—Ä–µ—Ç–µ –∫–º–µ—Ç—Å–∫–∏ –º–∞–Ω–¥–∞—Ç –æ—Ç –º–µ–Ω—é—Ç–æ –≤ –ª—è–≤–æ.

        ### –ò–∑—Ç–æ—á–Ω–∏–∫

        - [–ò–°–£–¢ –ü–ª–æ–≤–¥–∏–≤](http://isut.plovdiv.bg:998/map_default.phtml)
    """
    )

    municipal_dfs = dict()
    for mayor in mayors:
        municipal_dfs[mayor["name"]] = get_municipal_df(mayor)

    fig = go.Figure()
    for mayor in mayors:
        fig.add_trace(
            go.Bar(
                x=[mayor["name"]],
                y=[len(municipal_dfs[mayor["name"]])],
                name=mayor["name"],
            )
        )

    fig.update_layout(
        title="–°—Ç—Ä–æ–∏—Ç–µ–ª–Ω–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ –∫–º–µ—Ç—Å–∫–∏ –º–∞–Ω–¥–∞—Ç —Å –≤—ä–∑–ª–æ–∂–∏—Ç–µ–ª "
              "–û–±—â–∏–Ω–∞ –ü–ª–æ–≤–¥–∏–≤",
        xaxis_title="–ö–º–µ—Ç—Å–∫–∏ –º–∞–Ω–¥–∞—Ç",
        yaxis_title="–ë—Ä–æ–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è",
    )
    st.plotly_chart(fig)





st.set_page_config(
    page_title="–°—Ç—Ä–æ–∏—Ç–µ–ª–Ω–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è",
)
intro()
